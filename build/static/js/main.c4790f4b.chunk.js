(this["webpackJsonpstorium-pwa"]=this["webpackJsonpstorium-pwa"]||[]).push([[0],{239:function(e,t,n){},687:function(e,t,n){"use strict";n.r(t);var r,c,s,a,o,i,l,d,u,b,m,j,x,h=n(0),f=n(90),O=n.n(f),g=(n(239),n(14)),p=n(16),v=n(694),w=n(695),y=n(693),N=n(697),k=n(17),S=n(25),C=n(696),I=Object(C.a)(r||(r=Object(S.a)(["\n  query {\n    getAllStory {\n      id\n      content\n      title\n      authorID\n      createdAt\n      reactions\n      comments {\n        author\n        comment\n      }\n      author {\n        username\n      }\n    }\n  }\n"]))),L=Object(C.a)(c||(c=Object(S.a)(["\n  query getStoryById($id: ID!) {\n    getStoryById(id: $id) {\n      title\n      content\n      authorID\n      createdAt\n      reactions\n      comments {\n        author\n        comment\n      }\n      author {\n        username\n      }\n    }\n  }\n"]))),B=Object(C.a)(s||(s=Object(S.a)(["\n  query {\n    me {\n      user\n    }\n  }\n"]))),$=Object(C.a)(a||(a=Object(S.a)(["\n  query getUserById($id: ID!) {\n    getUserById(id: $id) {\n      username\n      email\n      followers\n      followings\n      stories {\n        id\n        title\n        content\n        createdAt\n        reactions\n        comments {\n          author\n          comment\n        }\n      }\n    }\n  }\n"]))),z=Object(k.b)({key:"isLogin",default:!1}),U=Object(k.b)({key:"isFollow",default:!1}),D=function(){var e,t=Object(k.d)(z),n=Object(N.a)(B),r=n.data,c=n.refetch;return Object(h.useEffect)((function(){c()}),[t]),null===r||void 0===r||null===(e=r.me)||void 0===e?void 0:e.user},M=n.p+"static/media/logo.b74770b2.svg",W=n(133),H=n(219),A=function(e){return Object(W.createAvatar)(H,{seed:e})},T=n(1),E=function(){var e=D(),t=A(e);return Object(T.jsxs)("nav",{className:"sticky top-0 w-full h-16 bg-white flex justify-around items-center   px-4 z-10",children:[Object(T.jsx)(g.b,{to:"/",className:"font-medium w-20 flex items-center justify-center text-gray-800 cursor-pointer hover:text-blue-500",children:Object(T.jsx)("img",{className:"w-20 ",src:M,alt:"Storium"})}),e?Object(T.jsx)(g.b,{to:"/profile/".concat(e),className:"hidden md:flex items-center justify-center cursor-pointer outline-none sticky right-0 top-2 w-10 h-10 rounded-full  ",children:Object(T.jsx)("div",{className:"w-10 h-10",dangerouslySetInnerHTML:{__html:t}})}):Object(T.jsx)(g.b,{to:"/login",className:"hidden md:flex text-blue-700 items-center justify-center cursor-pointer outline-none sticky right-0 top-2 w-8 h-8 rounded-full bg-blue-200  ",children:Object(T.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(T.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),Object(T.jsxs)("ul",{className:"flex justify-between items-center w-1/2 md:-translate-x-full md:hidden ",children:[Object(T.jsx)("li",{children:Object(T.jsxs)(g.b,{to:"/",className:"font-medium w-20 flex items-center justify-center text-gray-800 cursor-pointer hover:text-blue-500",children:[Object(T.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(T.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})," ","Stories"]})}),e&&Object(T.jsx)("li",{children:Object(T.jsxs)(g.b,{to:"/editor",className:"font-medium flex w-32 justify-center items-center text-gray-800 cursor-pointer hover:text-blue-500",children:[Object(T.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(T.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})," ","Create Story"]})}),e?Object(T.jsx)("li",{children:Object(T.jsx)(g.b,{to:"/profile/".concat(e),children:Object(T.jsx)("div",{className:"w-9 h-9",dangerouslySetInnerHTML:{__html:t}})})}):Object(T.jsx)("li",{children:Object(T.jsx)(g.b,{to:"/login",children:Object(T.jsxs)("button",{className:" flex items-center justify-center w-32 h-9 bg-blue-500 font-medium text-white rounded-md hover:bg-blue-700 cursor-pointer outline-none shadow-md ",children:["Get Started",Object(T.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(T.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})})]})]})},F=function(){var e=Object(N.a)(I),t=e.data,n=e.refetch;return Object(h.useEffect)((function(){n()}),[]),Object(T.jsx)("div",{className:"w-1/2 m-auto  px-8 py-4 md:w-full md:px-2 ",children:t?t.getAllStory.map((function(e){return Object(T.jsx)(g.b,{to:"/story/".concat(e.id),children:Object(T.jsxs)("div",{className:"w-full   mr-auto ml-auto mb-4 px-4 md:px-2 py-2 flex justify-between flex-col border-2 border-blue-400 rounded-md",children:[Object(T.jsx)("div",{className:"mb-6 md:mb-1",children:Object(T.jsx)(g.b,{to:"/profile/".concat(e.authorID),className:"flex items-center md:flex-col md:items-start",children:Object(T.jsxs)("div",{className:"container flex items-center",children:[Object(T.jsx)("div",{className:"w-8 h-8 ",dangerouslySetInnerHTML:{__html:A(e.authorID)}}),Object(T.jsx)("p",{className:"font-semibold capitalize md:text-sm text-md px-4 md:px-2 text-gray-800 hover:text-blue-500",children:e.author.username})]})})}),Object(T.jsx)("p",{className:"text-3xl font-extrabold md:font-bold font-sans  text-gray-700 cursor-pointer capitalize hover:text-blue-500 md:text-xl ",children:e.title}),Object(T.jsxs)("p",{className:"text-gray-500 text-sm font-semibold py-2",children:["Published on : ",new Date(Number(e.createdAt)).toDateString()]}),Object(T.jsxs)("div",{className:"flex container justify-around items-center border-t-2 border-yellow-50 ",children:[Object(T.jsxs)("div",{className:" text-gray-700  flex",children:[Object(T.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(T.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),Object(T.jsx)("p",{className:"font-medium text-base px-1",children:e.reactions.length})]}),Object(T.jsxs)("div",{className:" text-gray-700  flex ",children:[Object(T.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(T.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})}),Object(T.jsx)("p",{className:"text-base font-medium px-1",children:e.comments.length})]})]})]})},e.id)})):Object(T.jsx)(T.Fragment,{children:[0,0,0,0].map((function(e){return Object(T.jsxs)("div",{className:"w-full bg-blue-100  mr-auto ml-auto mb-4 animate-pulse px-4 py-2 flex justify-between flex-col border-2 rounded-md",children:[Object(T.jsx)("div",{className:"container h-8 bg-blue-200 rounded-lg  mb-8"}),Object(T.jsxs)("div",{children:[Object(T.jsx)("div",{className:"w-40 h-4 bg-blue-200 mb-2 rounded-sm"}),Object(T.jsx)("div",{className:"w-36 h-6 bg-blue-200 rounded"})]})]})}))})})},_=n(9),q=n.n(_),P=n(21),R=n(4),J=n(31),V=n(698),G=Object(C.a)(o||(o=Object(S.a)(["\n  mutation loginUser($email: String!, $password: String!) {\n    loginUser(email: $email, password: $password) {\n      user\n      error\n    }\n  }\n"]))),K=Object(C.a)(i||(i=Object(S.a)(["\n  mutation registerUser(\n    $username: String!\n    $email: String!\n    $password: String!\n  ) {\n    createUser(username: $username, email: $email, password: $password) {\n      user\n      error\n    }\n  }\n"]))),Q=Object(C.a)(l||(l=Object(S.a)(["\n  mutation updateStory($id: ID!, $title: String, $content: String) {\n    updateStory(id: $id, title: $title, content: $content) {\n      id\n    }\n  }\n"]))),X=Object(C.a)(d||(d=Object(S.a)(["\n  mutation deleteStory($id: ID!) {\n    deleteStory(id: $id) {\n      id\n    }\n  }\n"]))),Y=Object(C.a)(u||(u=Object(S.a)(["\n  mutation CreateStory($title: String!, $content: String!) {\n    createStory(title: $title, content: $content) {\n      id\n    }\n  }\n"]))),Z=Object(C.a)(b||(b=Object(S.a)(["\n  mutation {\n    logout {\n      user\n    }\n  }\n"]))),ee=Object(C.a)(m||(m=Object(S.a)(["\n  mutation comment($id: ID!, $comment: String) {\n    comment(id: $id, comment: $comment) {\n      id\n    }\n  }\n"]))),te=Object(C.a)(j||(j=Object(S.a)(["\n  mutation react($id: ID!) {\n    react(id: $id) {\n      id\n    }\n  }\n"]))),ne=Object(C.a)(x||(x=Object(S.a)(["\n  mutation followUser($id: ID!) {\n    followUser(id: $id) {\n      id\n    }\n  }\n"]))),re=function(){var e=Object(V.a)(Y),t=Object(R.a)(e,1)[0],n=Object(p.f)(),r=Object(h.useState)(""),c=Object(R.a)(r,2),s=c[0],a=c[1],o=Object(h.useState)(""),i=Object(R.a)(o,2),l=i[0],d=i[1],u=Object(h.useState)(!1),b=Object(R.a)(u,2),m=b[0],j=b[1],x=function(){var e=Object(P.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({variables:{title:l,content:s}});case 2:try{n.push("/")}catch(r){}case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(T.jsxs)("div",{className:"w-full  px-40 md:p-2",children:[Object(T.jsxs)("div",{className:"w-full ml-auto sticky top-14 h-14 flex md:flex-col md:h-auto  md:mb-4 items-center justify-between",children:[Object(T.jsx)("input",{className:"w-4/6 md:w-full h-12 border-2 md:border px-4 md:px-2 text-xl md:text-lg font-bold md:font-semibold outline-none md:mb-2 rounded-md",placeholder:"Title of the story",onChange:function(e){return d(e.target.value)},autoFocus:!0}),Object(T.jsxs)("div",{className:"md:container md:flex md:justify-evenly md:items-center",children:[Object(T.jsx)("button",{disabled:""===s||""===l,onClick:function(){return j(!m)},className:"hidden w-28 md:w-20 h-8 bg-green-100 rounded-md   ".concat(""===s||""===l?"text-green-400":"text-green-800"," hover:bg-green-300  text-md md:text-sm font-medium shadow-sm md:block"),children:m?"Edit":"Preview"}),Object(T.jsx)("button",{onClick:function(){return n.push("/")},className:"w-28 md:w-20 h-8 bg-yellow-100 rounded-md hover:bg-yellow-300 text-yellow-800 text-md md:text-sm  font-medium shadow-sm mx-2 md:mx-0",children:"Cancel"}),Object(T.jsx)("button",{disabled:""===s||""===l,onClick:x,className:"w-28 md:w-20 h-8 bg-blue-200 rounded-md hover:bg-blue-300   ".concat(""===s||""===l?"text-blue-400":"text-blue-800"," text-md md:text-sm  capitalize font-medium shadow-sm  ").concat(""===s||""===l?"cursor-not-allowed":"cursor-pointer"),children:"publish"})]})]}),Object(T.jsx)("div",{className:"md:block hidden",children:Object(T.jsx)(J.a,{preview:m?"preview":"edit",hideToolbar:"true",height:500,value:s,onChange:a})}),Object(T.jsx)("div",{className:"md:hidden block",children:Object(T.jsx)(J.a,{height:500,value:s,onChange:a})})]})},ce=function(){var e,t,n=Object(p.f)(),r=Object(h.useState)(""),c=Object(R.a)(r,2),s=c[0],a=c[1],o=Object(h.useState)(""),i=Object(R.a)(o,2),l=i[0],d=i[1],u=Object(V.a)(G),b=Object(R.a)(u,2),m=b[0],j=b[1].data,x=Object(k.c)(z),f=Object(R.a)(x,2),O=f[0],v=f[1],w=function(){var e=Object(P.a)(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,m({variables:{email:s,password:l}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(null===j||void 0===j||null===(e=j.loginUser)||void 0===e?void 0:e.user)&&(v(!O),n.push("/")),Object(T.jsxs)("div",{className:"md:w-full p-8 w-4/12 shadow-lg rounded-lg h-96 ml-auto mr-auto mt-32 md:mt-20 flex flex-col justify-center items-center bg-gray-100",children:[Object(T.jsx)("p",{className:"text-blue-500 font-bold text-3xl mb-4",children:"Login"}),Object(T.jsxs)("form",{className:"container h-60 flex justify-around items-center flex-col relative",onSubmit:w,children:[Object(T.jsx)("input",{className:"w-80 h-11 outline-none border-2 rounded-lg border-blue-400 p-4",type:"email",placeholder:"email",onChange:function(e){return a(e.target.value)},required:!0}),Object(T.jsx)("input",{className:"w-80 h-11 outline-none border-2 rounded-lg border-blue-400 p-4",type:"password",placeholder:"password",onChange:function(e){return d(e.target.value)},required:!0}),(null===j||void 0===j||null===(t=j.loginUser)||void 0===t?void 0:t.error)&&Object(T.jsx)("p",{className:"text-red-500 font-medium ",children:j.loginUser.error}),Object(T.jsx)("button",{disabled:!s||!l,type:"submit",className:"w-40 md:w-28 h-9 bg-blue-200   rounded-lg text-blue-700 font-semibold  uppercase hover:bg-blue-300 ",children:"submit"}),Object(T.jsx)(g.b,{to:"/register",children:Object(T.jsx)("p",{className:"font-medium text-base hover:text-blue-400 cursor-pointer ",children:"new user"})})]})]})},se=Object(k.b)({key:"isReact",default:!1}),ae=Object(k.b)({key:"isComment",default:!1}),oe=function(e){var t=e.id,n=Object(k.c)(se),r=Object(R.a)(n,2),c=r[0],s=r[1],a=D(),o=function(e){var t=Object(k.d)(se),n=Object(N.a)(L,{variables:{id:e}}),r=n.data,c=n.refetch;return Object(h.useEffect)((function(){c()}),[t]),null===r||void 0===r?void 0:r.getStoryById}(t),i=Object(V.a)(te),l=Object(R.a)(i,1)[0],d=function(){var e=Object(P.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({variables:{id:t}});case 2:try{s(!c)}catch(n){}case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(T.jsx)("div",{onClick:d,className:"cursor-pointer",children:-1===o.reactions.indexOf(a)?Object(T.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(T.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}):Object(T.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:Object(T.jsx)("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})})})},ie=function(e){var t=e.title,n=e.id;return Object(T.jsx)("div",{onClick:function(){navigator.share&&navigator.share({title:t,text:"Storium",url:"https://storium.herokuapp.com/story/".concat(n)})},className:"cursor-pointer",children:Object(T.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(T.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})})},le=function(e){var t=e.comment,n=Object(N.a)($,{variables:{id:t.author}}).data,r=A(t.author);return Object(T.jsx)(T.Fragment,{children:n&&Object(T.jsx)("div",{className:"container my-2  p-1",children:Object(T.jsxs)("div",{className:" container flex items-start ",children:[Object(T.jsx)(g.b,{to:"/profile/".concat(t.author),children:Object(T.jsx)("div",{className:"w-8 h-8",dangerouslySetInnerHTML:{__html:r}})}),Object(T.jsxs)("div",{className:"mx-2 container border-blue-300 border-2 p-1 rounded-lg ",children:[Object(T.jsx)(g.b,{to:"/profile/".concat(t.author),children:Object(T.jsx)("p",{className:"text-base pb-2 font-medium text-gray-800",children:n.getUserById.username})}),Object(T.jsx)("hr",{}),Object(T.jsx)(J.a.Markdown,{source:t.comment})]})]})})})},de=function(e){var t=e.id,n=D(),r=Object(p.f)(),c=Object(h.useState)(""),s=Object(R.a)(c,2),a=s[0],o=s[1],i=Object(k.c)(ae),l=Object(R.a)(i,2),d=l[0],u=l[1],b=Object(h.useState)(!1),m=Object(R.a)(b,2),j=m[0],x=m[1],f=function(e){var t=Object(k.d)(ae),n=Object(N.a)(L,{variables:{id:e}}),r=n.data,c=n.refetch;return Object(h.useEffect)((function(){c()}),[t]),null===r||void 0===r?void 0:r.getStoryById}(t),O=Object(V.a)(ee),g=Object(R.a)(O,1)[0],v=function(){var e=Object(P.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g({variables:{id:t,comment:a}});case 2:try{u(!d),o("")}catch(n){}case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(T.jsx)("div",{children:Object(T.jsxs)("div",{children:[n?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(J.a,{preview:j?"preview":"edit",hideToolbar:"true",value:a,onChange:o,height:100}),Object(T.jsxs)("div",{className:"container p-1 flex items-center justify-around",children:[Object(T.jsx)("button",{disabled:""===a,onClick:function(){return x(!j)},className:"w-24 h-8 rounded-md  ".concat(""===a?"text-green-300 bg-green-100 ":"text-green-700 bg-green-200 "," font-semibold capitalize outline-none  ").concat(""===a?"cursor-not-allowed ":"cursor-pointer"),children:j?"edit":"preview"}),Object(T.jsx)("button",{disabled:""===a,onClick:v,className:"w-24 h-8 rounded-md   ".concat(""===a?"text-blue-300 bg-blue-100":"text-blue-700 bg-blue-200"," font-semibold capitalize outline-none ").concat(""===a?"cursor-not-allowed ":"cursor-pointer"),children:"comment"})]})]}):Object(T.jsx)("div",{children:Object(T.jsx)("button",{onClick:function(){return r.push("/login")},className:"container h-12 md:h-9 bg-blue-200 text-blue-700 hover:bg-blue-300 rounded",children:"sign in to react or comment"})}),Object(T.jsxs)("div",{children:[Object(T.jsx)("p",{className:"text-lg font-bold ",children:"Comments"}),f.comments.length>0?f.comments.map((function(e){return Object(T.jsx)(le,{comment:e},e.id)})):Object(T.jsx)("div",{className:"container h-32 flex justify-center items-center",children:Object(T.jsx)("p",{className:"text-lg font-bold text-gray-400",children:"Nothing to show here"})})]})]})})},ue=function(e){var t=e.id,n=Object(p.f)(),r=Object(V.a)(X),c=Object(R.a)(r,1)[0],s=function(){var e=Object(P.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({variables:{id:t}});case 2:try{n.push("/")}catch(r){}case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(T.jsx)("button",{onClick:s,className:"bg-red-200 text-red-700 rounded-sm p-1 text-base font-semibold capitalize",children:Object(T.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(T.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})},be=function(){var e=Object(p.g)().id,t=D(),n=Object(p.f)(),r=Object(N.a)(L,{variables:{id:e}}).data;return Object(T.jsx)("div",{className:"w-2/3 ml-auto mr-auto p-8 bg-white md:w-full md:p-2",children:r?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("div",{className:"mb-8",children:[Object(T.jsx)("p",{className:"text-4xl font-extrabold mb-8 md:mb-2 text-gray-800  capitalize md:text-2xl md:font-bold ",children:r.getStoryById.title}),Object(T.jsxs)("div",{className:"flex items-center container justify-between",children:[Object(T.jsxs)("div",{className:"flex items-start justify-between flex-col  ",children:[Object(T.jsxs)(g.b,{to:"/profile/".concat(r.getStoryById.authorID),className:"flex items-center",children:[Object(T.jsx)("div",{dangerouslySetInnerHTML:{__html:A(r.getStoryById.authorID)},className:"w-12 h-12 md:w-8 md:h-8"}),Object(T.jsxs)("p",{className:"px-4 md:px-2 hover:text-blue-500 capitalize font-bold text-gray-700",children:[" ",r.getStoryById.author.username]})]}),Object(T.jsxs)("p",{className:"text-gray-500 text-sm font-semibold",children:["Published on :"," ",new Date(Number(r.getStoryById.createdAt)).toDateString()]})]}),t===r.getStoryById.authorID&&Object(T.jsxs)("div",{className:"flex items-center ",children:[Object(T.jsx)("button",{onClick:function(){return n.push("/update/".concat(e))},className:"bg-green-200  mx-2  text-green-700 rounded-sm p-1  text-base font-semibold capitalize",children:Object(T.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(T.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),Object(T.jsx)(ue,{id:e})]})]})]}),Object(T.jsx)("hr",{}),Object(T.jsx)(J.a.Markdown,{className:"  text-gray-800 md:text-md",source:r.getStoryById.content}),Object(T.jsxs)("div",{className:"container flex justify-around items-center h-10 border rounded mt-2",children:[t&&Object(T.jsx)(oe,{id:e}),Object(T.jsx)(ie,{id:e,title:r.getStoryById.title})]}),Object(T.jsx)(de,{id:e})]}):Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("div",{className:"mb-8 animate-pulse",children:[Object(T.jsx)("div",{className:"container h-12 rounded-lg bg-gray-200 mb-8"}),Object(T.jsxs)("div",{className:"flex items-center justify-between md:flex-col md:items-start",children:[Object(T.jsx)("div",{className:"bg-gray-200 w-32 h-4 rounded mb-2"}),Object(T.jsx)("div",{className:"bg-gray-200 w-36 h-4 rounded"})]})]}),Object(T.jsx)("hr",{}),Object(T.jsxs)("div",{className:"container animate-pulse ",children:[Object(T.jsx)("div",{className:"container h-4 mb-2 bg-gray-200"}),Object(T.jsx)("div",{className:"container h-4  mb-2 bg-gray-200"}),Object(T.jsx)("div",{className:"container h-4  mb-2 bg-gray-200"}),Object(T.jsx)("div",{className:"container h-4  mb-2 bg-gray-200"}),Object(T.jsx)("div",{className:"container h-4 bg-gray-200"})]})]})})},me=function(){var e,t,n=Object(p.f)(),r=Object(h.useState)(""),c=Object(R.a)(r,2),s=c[0],a=c[1],o=Object(h.useState)(""),i=Object(R.a)(o,2),l=i[0],d=i[1],u=Object(h.useState)(""),b=Object(R.a)(u,2),m=b[0],j=b[1],x=Object(V.a)(K),f=Object(R.a)(x,2),O=f[0],g=f[1].data;return(null===g||void 0===g||null===(e=g.createUser)||void 0===e?void 0:e.user)&&n.push("/login"),Object(T.jsxs)("div",{className:"md:w-full p-8 w-4/12 shadow-lg rounded-lg h-96 ml-auto md:mt-20 mr-auto mt-32 flex flex-col justify-center items-center bg-gray-100",children:[Object(T.jsx)("p",{className:"text-blue-500 font-bold text-3xl mb-4",children:"Register"}),Object(T.jsxs)("form",{className:"container h-60 flex justify-around items-center flex-col ",onSubmit:function(e){e.preventDefault(),O({variables:{username:s,email:l,password:m}})},children:[Object(T.jsx)("input",{className:"w-80 h-11 outline-none border-2 rounded-lg border-blue-400 p-4",type:"text",placeholder:"username",required:!0,onChange:function(e){return a(e.target.value)}}),Object(T.jsx)("input",{className:"w-80 h-11 outline-none border-2 rounded-lg border-blue-400 p-4",type:"email",placeholder:"email",required:!0,onChange:function(e){return d(e.target.value)}}),Object(T.jsx)("input",{className:"w-80 h-11 outline-none border-2 rounded-lg border-blue-400 p-4",type:"password",placeholder:"password",required:!0,onChange:function(e){return j(e.target.value)}}),(null===g||void 0===g||null===(t=g.createUser)||void 0===t?void 0:t.error)&&Object(T.jsx)("p",{className:"text-red-500 font-medium ",children:g.createUser.error}),Object(T.jsx)("button",{type:"submit",className:"w-40 md:w-28 h-9 bg-blue-200 rounded-lg text-blue-700 font-semibold uppercase hover:bg-blue-300",children:"submit"})]})]})},je=function(e){var t=e.id,n=Object(V.a)(ne),r=Object(R.a)(n,1)[0],c=Object(k.c)(U),s=Object(R.a)(c,2),a=s[0],o=s[1],i=D(),l=function(e){var t=Object(k.d)(U),n=Object(N.a)($,{variables:{id:e}}),r=n.data,c=n.refetch;return Object(h.useEffect)((function(){c()}),[t]),null===r||void 0===r?void 0:r.getUserById}(t),d=function(){var e=Object(P.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r({variables:{id:t}});case 2:try{o(!a)}catch(n){}case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(T.jsx)("button",{onClick:d,className:"w-36 md:w-28 md:h-8 h-9 bg-blue-200 rounded-md font-semibold capitalize text-base hover:bg-blue-300 text-blue-700",children:l.followers.indexOf(i)>=0?"unfollow":"follow"})},xe=function(){var e=Object(k.c)(z),t=Object(R.a)(e,2),n=t[0],r=t[1],c=Object(p.f)(),s=Object(V.a)(Z),a=Object(R.a)(s,2),o=a[0],i=a[1].data,l=function(){var e=Object(P.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(null===i||void 0===i?void 0:i.logout)&&(!i.logout.user&&r(!n),!i.logout.user&&c.push("/")),Object(T.jsx)("button",{onClick:l,className:"w-36 md:w-32 md:h-8 h-9 bg-red-200 rounded-md font-semibold capitalize text-base hover:bg-red-300 text-red-700",children:"logout"})},he=function(){var e=Object(p.f)(),t=D(),n=Object(p.g)().id,r=A(n),c=Object(N.a)($,{variables:{id:n}}),s=c.data,a=c.refetch;return Object(h.useEffect)((function(){a()}),[]),Object(T.jsx)(T.Fragment,{children:s&&Object(T.jsx)("div",{className:"container px-8 pb-2 md:p-1 ",children:Object(T.jsxs)("div",{className:"flex justify-around items-start mt-4 md:mt-0 md:flex-col",children:[Object(T.jsxs)("div",{className:"w-1/3  p-4 shadow-md rounded-lg border-2 bg-gray-100 md:container md:mb-6",children:[Object(T.jsx)("div",{className:"mx-8",dangerouslySetInnerHTML:{__html:r}}),Object(T.jsxs)("p",{className:"text-5xl capitalize font-extrabold pb-8 md:pb-4 md:text-2xl md:font-bold text-gray-800",children:[t===n&&"Hello"," ",s.getUserById.username]}),t===n&&Object(T.jsx)("span",{className:"capitalize font-medium text-md text-gray-500 md:text-base ",children:"Have a nice Editing"}),Object(T.jsxs)("div",{className:"mt-4 mb-4 ",children:[Object(T.jsxs)("p",{className:"text-indigo-500 font-bold md:font-semibold md:text-base ",children:[Object(T.jsx)("span",{className:"text-gray-500 md:text-sm ",children:"Email"})," :"," ",s.getUserById.email]}),Object(T.jsxs)("p",{className:"font-semibold text-base md:text-sm text-gray-500",children:[Object(T.jsx)("span",{className:"text-indigo-500 font-bold text-lg md:text-base",children:s.getUserById.followers.length})," ","followers"]}),Object(T.jsxs)("p",{className:"font-semibold text-base md:text-sm   text-gray-500",children:[Object(T.jsx)("span",{className:" text-indigo-500 font-bold text-lg md:text-base",children:s.getUserById.followings.length})," ","followings"]})]}),t?t===n?Object(T.jsxs)("div",{className:"flex container justify-around items-center",children:[Object(T.jsx)("button",{onClick:function(){return e.push("/editor")},className:" w-36 md:w-32 md:h-8 h-9 bg-green-200 rounded-md font-semibold capitalize text-base hover:bg-green-300  text-green-700",children:"Create Story"}),Object(T.jsx)(xe,{})]}):Object(T.jsx)(je,{id:n}):""]}),Object(T.jsxs)("div",{className:"w-1/2 md:container",children:[Object(T.jsxs)("p",{className:"text-gray-800 font-bold text-2xl md:text-xl  capitalize mb-8 md:text-center",children:["stories by ",s.getUserById.username]}),s.getUserById.stories.length>0?s.getUserById.stories.map((function(e){return Object(T.jsx)(g.b,{to:"/story/".concat(e.id),children:Object(T.jsxs)("div",{className:"w-full  mr-auto ml-auto mb-4 px-4 py-2 flex justify-between rounded-md bg-yellow-50 flex-col border-2 ",children:[Object(T.jsx)("p",{className:"text-3xl font-extrabold md:font-bold font-sans mb-6 md:mb-3 text-gray-800 cursor-pointer capitalize hover:text-yellow-800 md:text-xl",children:e.title}),Object(T.jsx)("div",{children:Object(T.jsxs)("p",{className:"text-gray-600 text-sm font-semibold pb-2",children:["Published on :"," ",new Date(Number(e.createdAt)).toDateString()]})}),Object(T.jsxs)("div",{className:"flex container justify-around items-center border-t-2 border-blue-50 ",children:[Object(T.jsxs)("p",{className:"font-medium text-gray-700",children:[e.reactions.length," reactions"]}),Object(T.jsxs)("p",{className:"font-medium text-gray-700",children:[e.comments.length," comments"]})]})]})},e.id)})):Object(T.jsx)("div",{className:"container h-28 flex justify-center items-center",children:Object(T.jsx)("p",{className:"font-bold text-lg capitalize text-gray-300",children:"Nothing to show here"})})]})]})})})},fe=function(){var e,t,n=Object(p.g)().id,r=Object(V.a)(Q),c=Object(R.a)(r,1)[0],s=Object(N.a)(L,{variables:{id:n}}).data,a=Object(p.f)(),o=Object(h.useState)(null===s||void 0===s||null===(e=s.getStoryById)||void 0===e?void 0:e.content),i=Object(R.a)(o,2),l=i[0],d=i[1],u=Object(h.useState)(null===s||void 0===s||null===(t=s.getStoryById)||void 0===t?void 0:t.title),b=Object(R.a)(u,2),m=b[0],j=b[1],x=Object(h.useState)(!1),f=Object(R.a)(x,2),O=f[0],g=f[1],v=function(){var e=Object(P.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({variables:{id:n,title:m,content:l}});case 2:try{a.push("/story/".concat(n))}catch(t){}case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(T.jsxs)("div",{className:"w-full  px-40 md:p-2",children:[Object(T.jsxs)("div",{className:"w-full ml-auto sticky top-14 h-14 flex md:flex-col md:h-auto  md:mb-4 items-center justify-between",children:[Object(T.jsx)("input",{className:"w-4/6 md:w-full h-12 border-2 md:border px-4 md:px-2 text-xl md:text-lg font-bold md:font-semibold outline-none md:mb-2 rounded-md",placeholder:"Title of the story",onChange:function(e){return j(e.target.value)},autoFocus:!0,value:m}),Object(T.jsxs)("div",{className:"md:container md:flex md:justify-evenly md:items-center",children:[Object(T.jsx)("button",{disabled:""===l||""===m,onClick:function(){return g(!O)},className:"hidden w-28 md:w-20 h-8 bg-green-100 rounded-md   ".concat(""===l||""===m?"text-green-400":"text-green-800"," hover:bg-green-300  text-md md:text-sm font-medium shadow-sm md:block"),children:O?"Edit":"Preview"}),Object(T.jsx)("button",{onClick:function(){return a.push("/story/".concat(n))},className:"w-28 md:w-20 h-8 bg-yellow-100 rounded-md hover:bg-yellow-300 text-yellow-800 text-md md:text-sm  font-medium shadow-sm mx-2 md:mx-0",children:"Cancel"}),Object(T.jsx)("button",{disabled:""===l||""===m,onClick:v,className:"w-28 md:w-20 h-8 bg-blue-200 rounded-md hover:bg-blue-300   ".concat(""===l||""===m?"text-blue-400":"text-blue-800"," text-md md:text-sm  capitalize font-medium shadow-sm  ").concat(""===l||""===m?"cursor-not-allowed":"cursor-pointer"),children:"update"})]})]}),Object(T.jsx)("div",{className:"md:block hidden",children:Object(T.jsx)(J.a,{preview:O?"preview":"edit",hideToolbar:"true",height:500,value:l,onChange:d})}),Object(T.jsx)("div",{className:"md:hidden block",children:Object(T.jsx)(J.a,{height:500,value:l,onChange:d})})]})};var Oe=function(){var e=new v.a({uri:"/graphql",cache:new w.a});return Object(T.jsx)("div",{className:"App w-full h-full   ",children:Object(T.jsx)(y.a,{client:e,children:Object(T.jsxs)(g.a,{children:[Object(T.jsx)(E,{}),Object(T.jsxs)(p.c,{children:[Object(T.jsx)(p.a,{path:"/",exact:!0,component:F}),Object(T.jsx)(p.a,{path:"/editor",component:re}),Object(T.jsx)(p.a,{path:"/update/:id",component:fe}),Object(T.jsx)(p.a,{path:"/login",component:ce}),Object(T.jsx)(p.a,{path:"/story/:id",component:be}),Object(T.jsx)(p.a,{path:"/register",component:me}),Object(T.jsx)(p.a,{path:"/profile/:id",component:he})]})]})})})},ge=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function pe(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ve=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,700)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),s(e),a(e)}))};O.a.render(Object(T.jsx)(k.a,{children:Object(T.jsx)(Oe,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");ge?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):pe(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):pe(t,e)}))}}(),ve()}},[[687,1,2]]]);
//# sourceMappingURL=main.c4790f4b.chunk.js.map